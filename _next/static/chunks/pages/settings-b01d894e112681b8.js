(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{6944:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n(2595)}])},9147:function(e,t,n){"use strict";n.d(t,{XZ:function(){return h},H$:function(){return y},k9:function(){return m},at:function(){return b}});var r=n(4051),i=n.n(r);n(1674);function o(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){o(a,r,i,l,c,"next",e)}function c(e){o(a,r,i,l,c,"throw",e)}l(void 0)}))}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}var s=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=["Transactions","Categories","Information"],d=n(1674),f="apikey",g="baseid";function h(e){return p.apply(this,arguments)}function p(){return(p=a(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting all transactions:"),n=[],t("Transactions").select({maxRecords:1e3,view:"Grid view"}).eachPage((function(e,t){e.forEach((function(e){console.log("adding record. type: ".concat("undefined"===typeof e?"undefined":s(e),". name ").concat(e.constructor.name," is a promise: ").concat("function"===typeof e.then)),n.push(c({id:e.id},e.fields)),console.log("record added: ",n)})),t()}),(function(e){return e?(console.error(e),[]):(console.log("done getting all transactions",n),n)})),console.log("end of function. ".concat(n,", len: ").concat(n.length,", type: ").concat("undefined"===typeof n?"undefined":s(n),". name ").concat(n.constructor.name," is a promise: ").concat("function"===typeof n.then)),r=Promise.all(n),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){console.log("Validating baseid and api key");var n={passed:!0,apikey:!0,baseid:!0,trans_tbl:!0,ctgy_tbl:!0,info_tbl:!0},r=new d({apiKey:t}).base(e);return u.forEach((function(e){r(e).select({maxRecords:1,view:"Grid view"}).eachPage((function(e,t){e.forEach((function(e){})),t()}),(function(t){t&&(n.passed=!1,-1!==t.message.indexOf("api key")?n.apikey=!1:-1!==t.message.indexOf("Could not find what you are looking for")?n.baseid=!1:-1!==t.message.indexOf("Could not find table")&&e==u[0]?n.trans_tbl=!1:-1!==t.message.indexOf("Could not find table")&&e==u[1]?n.ctgy_tbl=!1:-1!==t.message.indexOf("Could not find table")&&e==u[2]&&(n.info_tbl=!1))}))})),console.log(n),n}function m(){var e=localStorage.getItem(g),t=localStorage.getItem(f);return null!==e&&null!==t}function b(e){return x.apply(this,arguments)}function x(){return(x=a(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(g),r=localStorage.getItem(f),o=new d({apiKey:r}).base(n),e.abrupt("return",t(o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2595:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),i=n(1664),o=n(9008),a=n(9147),l=n(7294),c="apikey",s="baseid";function u(e){var t=e.props,n=(0,l.useState)(""),u=n[0],f=n[1],g=(0,l.useState)(""),h=g[0],p=g[1];return(0,l.useEffect)((function(){null!==localStorage.getItem(c)&&f(localStorage.getItem(c)),null!==localStorage.getItem(s)&&p(localStorage.getItem(s))}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:"Settings"})}),(0,r.jsxs)("p",{children:["My props:",t]}),(0,r.jsx)("h1",{children:"Settings"}),(0,r.jsx)(i.default,{href:"/",children:(0,r.jsx)("a",{children:"Back to Home"})}),(0,r.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Base ID"}),(0,r.jsx)("input",{type:"text",placeholder:"BaseID",id:"baseid-input",value:h,onChange:function(e){return p(e.target.value)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"API Key"}),(0,r.jsx)("input",{type:"password",placeholder:"API Key",id:"apikey-input",value:u,onChange:function(e){return f(e.target.value)}})]}),(0,r.jsx)("button",{onClick:function(){return function(e,t){console.log("trying with ".concat(e," and ").concat(t));var n=(0,a.H$)(e,t);if(!0===n.passed){return localStorage.setItem(c,t),localStorage.setItem(s,e),d(),void(document.getElementById("apikey-input").value="super-secret-key")}alert("Incorrect Credentials",n)}(h,u)},children:"Update BaseId and Api Key"})]}),(0,r.jsx)("p",{children:"Something showing up right? Try making sure your database is set up correcly!"}),(0,r.jsx)("button",{onClick:d,children:"Test Database"}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Test"}),(0,r.jsx)("th",{children:"Result"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Overall"}),(0,r.jsx)("td",{id:"overall-result",children:" - "})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Correct Api Key"}),(0,r.jsx)("td",{id:"api-key-table-result",children:" - "})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Correct Base Id"}),(0,r.jsx)("td",{id:"baseid-result",children:" - "})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Transaction Table"}),(0,r.jsx)("td",{id:"trans-table-result",children:" - "})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Category Table"}),(0,r.jsx)("td",{id:"ctgry-table-result",children:" - "})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Information table Key"}),(0,r.jsx)("td",{id:"info-table-result",children:" - "})]})]})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("h2",{children:"Database Settings"}),(0,r.jsx)("p",{children:"Need to make a clean, new database? Click Here!"}),(0,r.jsx)("button",{children:"New Database"})]})}function d(){var e=localStorage.getItem(s),t=localStorage.getItem(c),n={};null!==t&&null!==t&&(n=(0,a.H$)(e,t));var r="Passed",i="Failed";n.passed?document.getElementById("overall-result").innerText=r:document.getElementById("overall-result").innerText=i,n.baseid?document.getElementById("baseid-result").innerText=r:document.getElementById("baseid-result").innerText=i,n.apikey?document.getElementById("api-key-table-result").innerText=r:document.getElementById("api-key-table-result").innerText=i,n.trans_tbl?document.getElementById("trans-table-result").innerText=r:document.getElementById("trans-table-result").innerText=i,n.ctgy_tbl?document.getElementById("ctgry-table-result").innerText=r:document.getElementById("ctgry-table-result").innerText=i,n.info_tbl?document.getElementById("info-table-result").innerText=r:document.getElementById("info-table-result").innerText=i}},356:function(){},9065:function(){}},function(e){e.O(0,[86,774,888,179],(function(){return t=6944,e(e.s=t);var t}));var t=e.O();_N_E=t}]);